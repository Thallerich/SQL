DROP TABLE IF EXISTS #Vsa;
GO

CREATE TABLE #Vsa (
  VsaID int
);

GO

INSERT INTO #Vsa (VsaID)
SELECT Vsa.ID
FROM Vsa
/* JOIN Kunden ON Vsa.KundenID = Kunden.ID
WHERE Kunden.KdNr IN (272941, 272937, 207498, 219703, 214247, 218399, 214062, 10005556, 10007267, 10002342, 202899, 218014, 218015, 10001937, 10002702, 10002710, 10002705, 215055, 272936, 217677, 225130, 10006565) */
WHERE EXISTS (
    SELECT VsaTour.*
    FROM VsaTour
    JOIN Touren ON VsaTour.TourenID = Touren.ID
    WHERE VsaTour.VsaID = Vsa.ID
      AND CAST(GETDATE() AS date) BETWEEN VsaTour.VonDatum AND VsaTour.BisDatum
      AND Touren.Tour IN (N'3-15408', N'4-15406', N'4-15405')
  )
  AND Vsa.NichtImmerLS = 1;

GO

UPDATE Vsa SET NichtImmerLS = 0
WHERE ID IN (SELECT VsaID FROM #Vsa);

GO

UPDATE Vsa SET NichtImmerLS = 1
WHERE ID IN (SELECT VsaID FROM #Vsa);

GO